npm verbose cli /usr/local/bin/node /usr/local/bin/npm
npm info using npm@10.9.2
npm info using node@v22.17.0
npm verbose title npm run dev
npm verbose argv "run" "dev"
npm verbose logfile logs-max:10 dir:/Users/liasiloam/.npm/_logs/2025-06-30T12_10_37_087Z-
npm verbose logfile /Users/liasiloam/.npm/_logs/2025-06-30T12_10_37_087Z-debug-0.log

> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

Connecting to database: postgresql://postgres.ooepnnsb...
Using DatabaseStorage
‚ö†Ô∏è  JWT_REFRESH_SECRET not set in environment variables. Using default key (INSECURE!)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üöÄ Server starting...
Environment variables check:
- NODE_ENV: development
- PORT: undefined
- DATABASE_URL: ‚úÖ Set
- JWT_SECRET: ‚úÖ Set
- OPENAI_API_KEY: ‚úÖ Set
üìù Registering routes...
‚úÖ Routes registered successfully
üîê Setting up authentication...
‚úÖ Simple authentication setup complete
üì± Registering mobile routes...
‚úÖ Mobile routes registered
üîß Setting up development environment
üîß Development mode: Setting up Vite
‚úÖ Server is running on port 3000
üåê Visit http://localhost:3000
üîç Health check: /api/health
üîç Simple test: /api/test/simple
=== Checking tasks table structure ===
Tasks table columns: Result(25) [
  {
    column_name: 'id',
    data_type: 'integer',
    is_nullable: 'NO',
    column_default: "nextval('tasks_id_seq'::regclass)"
  },
  {
    column_name: 'user_id',
    data_type: 'character varying',
    is_nullable: 'NO',
    column_default: null
  },
  {
    column_name: 'title',
    data_type: 'text',
    is_nullable: 'NO',
    column_default: null
  },
  {
    column_name: 'description',
    data_type: 'text',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'completed',
    data_type: 'boolean',
    is_nullable: 'NO',
    column_default: 'false'
  },
  {
    column_name: 'skill_id',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'goal_id',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'goal_tags',
    data_type: 'ARRAY',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'exp_reward',
    data_type: 'integer',
    is_nullable: 'NO',
    column_default: '0'
  },
  {
    column_name: 'estimated_duration',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: '25'
  },
  {
    column_name: 'actual_duration',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'accumulated_time',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: '0'
  },
  {
    column_name: 'pomodoro_session_id',
    data_type: 'text',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'started_at',
    data_type: 'timestamp without time zone',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'created_at',
    data_type: 'timestamp without time zone',
    is_nullable: 'NO',
    column_default: 'now()'
  },
  {
    column_name: 'completed_at',
    data_type: 'timestamp without time zone',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'task_category',
    data_type: 'text',
    is_nullable: 'NO',
    column_default: "'todo'::text"
  },
  {
    column_name: 'task_type',
    data_type: 'text',
    is_nullable: 'NO',
    column_default: "'simple'::text"
  },
  {
    column_name: 'parent_task_id',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'order',
    data_type: 'integer',
    is_nullable: 'NO',
    column_default: '0'
  },
  {
    column_name: 'tags',
    data_type: 'ARRAY',
    is_nullable: 'YES',
    column_default: "'{}'::text[]"
  },
  {
    column_name: 'difficulty',
    data_type: 'text',
    is_nullable: 'NO',
    column_default: "'medium'::text"
  },
  {
    column_name: 'required_energy_balls',
    data_type: 'integer',
    is_nullable: 'NO',
    column_default: '1'
  },
  {
    column_name: 'last_completed_at',
    data_type: 'timestamp without time zone',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'completion_count',
    data_type: 'integer',
    is_nullable: 'NO',
    column_default: '0'
  }
]
Attempting to create test task with data: {
  userId: 'test_user_debug',
  title: 'Debug Test Task',
  description: 'Testing task creation',
  completed: false,
  taskCategory: 'todo',
  taskType: 'todo',
  difficulty: 'easy',
  expReward: 10,
  estimatedDuration: 15,
  requiredEnergyBalls: 1,
  tags: []
}
Test task creation failed: PostgresError: column "skills" of relation "tasks" does not exist
    at ErrorResponse (/Users/liasiloam/Library/CloudStorage/Dropbox/‰∏™‰∫∫È°πÁõÆ/ÔºÅAIÈ°πÁõÆ/level up solo/levelupsolo/node_modules/postgres/cjs/src/connection.js:794:26)
    at handle (/Users/liasiloam/Library/CloudStorage/Dropbox/‰∏™‰∫∫È°πÁõÆ/ÔºÅAIÈ°πÁõÆ/level up solo/levelupsolo/node_modules/postgres/cjs/src/connection.js:480:6)
    at Socket.data (/Users/liasiloam/Library/CloudStorage/Dropbox/‰∏™‰∫∫È°πÁõÆ/ÔºÅAIÈ°πÁõÆ/level up solo/levelupsolo/node_modules/postgres/cjs/src/connection.js:315:9)
    at Socket.emit (node:events:518:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TCP.onStreamRead (node:internal/stream_base_commons:189:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42703',
  position: '319',
  file: 'parse_target.c',
  line: '1065',
  routine: 'checkInsertTargets'
}
8:10:44 PM [express] GET /api/debug/tasks-table 200 in 2559ms :: {"taskColumns":[{"column_name":"id"‚Ä¶
=== Checking tasks table structure ===
Tasks table columns: Result(25) [
  {
    column_name: 'id',
    data_type: 'integer',
    is_nullable: 'NO',
    column_default: "nextval('tasks_id_seq'::regclass)"
  },
  {
    column_name: 'user_id',
    data_type: 'character varying',
    is_nullable: 'NO',
    column_default: null
  },
  {
    column_name: 'title',
    data_type: 'text',
    is_nullable: 'NO',
    column_default: null
  },
  {
    column_name: 'description',
    data_type: 'text',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'completed',
    data_type: 'boolean',
    is_nullable: 'NO',
    column_default: 'false'
  },
  {
    column_name: 'skill_id',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'goal_id',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'goal_tags',
    data_type: 'ARRAY',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'exp_reward',
    data_type: 'integer',
    is_nullable: 'NO',
    column_default: '0'
  },
  {
    column_name: 'estimated_duration',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: '25'
  },
  {
    column_name: 'actual_duration',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'accumulated_time',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: '0'
  },
  {
    column_name: 'pomodoro_session_id',
    data_type: 'text',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'started_at',
    data_type: 'timestamp without time zone',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'created_at',
    data_type: 'timestamp without time zone',
    is_nullable: 'NO',
    column_default: 'now()'
  },
  {
    column_name: 'completed_at',
    data_type: 'timestamp without time zone',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'task_category',
    data_type: 'text',
    is_nullable: 'NO',
    column_default: "'todo'::text"
  },
  {
    column_name: 'task_type',
    data_type: 'text',
    is_nullable: 'NO',
    column_default: "'simple'::text"
  },
  {
    column_name: 'parent_task_id',
    data_type: 'integer',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'order',
    data_type: 'integer',
    is_nullable: 'NO',
    column_default: '0'
  },
  {
    column_name: 'tags',
    data_type: 'ARRAY',
    is_nullable: 'YES',
    column_default: "'{}'::text[]"
  },
  {
    column_name: 'difficulty',
    data_type: 'text',
    is_nullable: 'NO',
    column_default: "'medium'::text"
  },
  {
    column_name: 'required_energy_balls',
    data_type: 'integer',
    is_nullable: 'NO',
    column_default: '1'
  },
  {
    column_name: 'last_completed_at',
    data_type: 'timestamp without time zone',
    is_nullable: 'YES',
    column_default: null
  },
  {
    column_name: 'completion_count',
    data_type: 'integer',
    is_nullable: 'NO',
    column_default: '0'
  }
]
Attempting to create test task with data: {
  userId: 'test_user_debug',
  title: 'Debug Test Task',
  description: 'Testing task creation',
  completed: false,
  taskCategory: 'todo',
  taskType: 'todo',
  difficulty: 'easy',
  expReward: 10,
  estimatedDuration: 15,
  requiredEnergyBalls: 1,
  tags: []
}
Test task creation failed: PostgresError: column "skills" of relation "tasks" does not exist
    at ErrorResponse (/Users/liasiloam/Library/CloudStorage/Dropbox/‰∏™‰∫∫È°πÁõÆ/ÔºÅAIÈ°πÁõÆ/level up solo/levelupsolo/node_modules/postgres/cjs/src/connection.js:794:26)
    at handle (/Users/liasiloam/Library/CloudStorage/Dropbox/‰∏™‰∫∫È°πÁõÆ/ÔºÅAIÈ°πÁõÆ/level up solo/levelupsolo/node_modules/postgres/cjs/src/connection.js:480:6)
    at Socket.data (/Users/liasiloam/Library/CloudStorage/Dropbox/‰∏™‰∫∫È°πÁõÆ/ÔºÅAIÈ°πÁõÆ/level up solo/levelupsolo/node_modules/postgres/cjs/src/connection.js:315:9)
    at Socket.emit (node:events:518:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TCP.onStreamRead (node:internal/stream_base_commons:189:23) {
  severity_local: 'ERROR',
  severity: 'ERROR',
  code: '42703',
  position: '319',
  file: 'parse_target.c',
  line: '1065',
  routine: 'checkInsertTargets'
}
8:12:59 PM [express] GET /api/debug/tasks-table 200 in 2902ms :: {"taskColumns":[{"column_name":"id"‚Ä¶
npm verbose cwd /Users/liasiloam/Library/CloudStorage/Dropbox/‰∏™‰∫∫È°πÁõÆ/ÔºÅAIÈ°πÁõÆ/level up solo/levelupsolo
npm verbose os Darwin 24.5.0
npm verbose node v22.17.0
npm verbose npm  v10.9.2
npm verbose exit 143
npm verbose code 143
