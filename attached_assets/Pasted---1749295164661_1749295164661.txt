好的，下面是基于“任务多级结构（主线目标 → 阶段任务 → 每日任务）”的**详细功能设计方案**，涵盖：

* 数据结构设计
* 页面结构设计（含组件）
* 用户操作流程（添加、完成、编辑任务）
* 后续可拓展建议（如成就、经验、统计等）

---

## 🎯 任务多级结构功能设计

### 一、功能目标

构建一个可以清晰拆解目标、追踪执行进度并获得正向激励的任务系统，帮助自由职业者更好地管理长期目标和日常行动。

---

### 二、任务层级结构

#### 🌟 结构分层（3级）：

| 层级   | 示例             | 说明           |
| ---- | -------------- | ------------ |
| 主线目标 | 写一份科研论文        | 一个清晰的长期目标    |
| 阶段任务 | 完成第一章/提交开题报告   | 中期成果或里程碑     |
| 每日任务 | 每天写500字/整理文献2篇 | 具体可执行的每日打卡任务 |

---

### 三、任务数据结构（JSON 示例）

```json
{
  "id": "goal-001",
  "title": "撰写论文",
  "type": "main",
  "tags": ["写作"],
  "children": [
    {
      "id": "phase-001",
      "title": "完成开题报告",
      "type": "phase",
      "tags": ["写作"],
      "children": [
        {
          "id": "task-001",
          "title": "查阅10篇相关文献",
          "type": "daily",
          "recurring": false,
          "xp": 30,
          "status": "incomplete"
        },
        {
          "id": "task-002",
          "title": "写开题绪论",
          "type": "daily",
          "recurring": false,
          "xp": 50,
          "status": "complete"
        }
      ]
    }
  ]
}
```

---

### 四、页面结构设计（界面布局）

#### 🧱 页面区域划分（React 组件结构）

```
<TaskDashboard />
├── XPHeader                👉 显示总经验、等级、今日完成率
├── GoalList               👉 遍历所有主线目标
│   ├── GoalCard
│   │   ├── Title
│   │   ├── Tag Chips
│   │   ├── Progress Bar
│   │   ├── <PhaseList>
│   │   │   └── PhaseCard
│   │   │       └── <DailyTaskList>
│   │   │           └── DailyTaskCard（打钩 + XP + 动画）
│   │   └── Add Phase Button
├── Add Main Goal Button   👉 浮动 + 动效
```

---

### 五、用户操作流程设计

#### 1. 添加任务流程

* **添加主线目标**

  * 点击「添加目标」按钮 → 弹出表单（输入标题、标签）
* **添加阶段任务**

  * 在每个主线卡片下点击「添加阶段」→ 填写名称+预计完成时间
* **添加每日任务**

  * 每个阶段卡片中「添加每日任务」→ 可勾选「是否重复」（daily/weekly）

> 表单字段：标题、标签（可选）、XP奖励（自动/自定义）、是否重复、预计用时、备注

---

#### 2. 完成任务流程

* 勾选每日任务 ✅：

  * 更新状态为 `complete`
  * +XP 动效上浮
  * 若该阶段下所有任务完成 → 阶段完成动画 🎉
  * 若所有阶段完成 → 主线目标自动标记为完成 🏆

> 每完成一个任务，顶部经验条更新，显示累计进度。

---

#### 3. 编辑任务流程

* 鼠标悬浮任务 → 显示「✏️ 编辑」或「🗑 删除」按钮
* 支持修改标题、标签、是否重复、奖励XP
* 阶段和主线任务可“拖拽排序”（可选）

---

### 六、交互设计亮点

| 功能   | 说明                          |
| ---- | --------------------------- |
| 动画反馈 | 任务完成时 XP 上浮 + 成就弹窗动画        |
| 状态同步 | 父级任务状态由子任务决定（自动完成）          |
| 进度展示 | 每个主线卡片显示任务进度条（%）            |
| 标签过滤 | 顶部支持筛选标签查看某类任务              |
| 数据存储 | 初期使用 LocalStorage → 后期接入 DB |

---

### 七、未来扩展建议（第二阶段）

* 引入「成就系统」：如“完成5个主线目标”、“连续7天打卡”等
* 引入「时间估算 vs 实际花费」差距反馈
* 生成「每周总结报告」：展示完成数、增长曲线等
* 接入 AI 拆解任务或推荐任务（如用 ChatGPT 拆分目标）
* 自定义目标模板：创建通用计划（写论文、开发App等）

---

需要我现在帮你输出其中某个部分（如 GoalList/PhaseCard/TaskCard 的组件代码）吗？也可以为你写一整套 mock 页面 + 任务卡片 + 经验条逻辑。
