# 天赋点数系统设计方案

## 系统概述

天赋点数系统是在现有经验值系统基础上的进阶机制，让玩家可以进一步定制和强化自己的技能发展方向。

## 核心概念

### 1. 天赋点数获取
- **技能升级获得**：每次技能升级获得1个天赋点
- **里程碑奖励**：完成重要目标的里程碑获得天赋点
- **成就系统**：达成特定成就获得天赋点
- **连续签到**：连续完成每日任务达到一定天数获得天赋点

### 2. 天赋树结构

每个核心技能对应一个天赋树：

#### 身体掌控力天赋树
```
基础层（1点解锁）
├── 耐力提升：完成运动任务获得额外10%经验
├── 恢复加速：能量球恢复速度+10%
└── 运动达人：运动类任务所需能量球-1

进阶层（5点解锁）
├── 铁人意志：连续运动任务完成后获得连击奖励
├── 精力充沛：每日最大能量球+2
└── 健康专家：解锁健康数据追踪功能

大师层（10点解锁）
└── 身体大师：所有运动任务经验+50%，解锁专属成就
```

#### 心智成长力天赋树
```
基础层（1点解锁）
├── 快速学习：学习任务经验+10%
├── 专注强化：番茄钟时长可自定义(15-45分钟)
└── 知识积累：完成阅读任务额外奖励

进阶层（5点解锁）
├── 深度思考：解锁任务笔记功能
├── 触类旁通：完成任务时关联技能也获得经验
└── 学习计划：解锁学习路径规划功能

大师层（10点解锁）
└── 智慧大师：所有学习任务经验+50%，AI推荐精准度提升
```

### 3. 天赋点数使用规则

1. **顺序解锁**：必须先解锁基础层才能解锁进阶层
2. **点数分配**：可以自由分配到任意已解锁的技能树
3. **重置机制**：消耗一定资源可以重置天赋点重新分配
4. **平衡机制**：鼓励多元发展，单一技能树投入过多会递减收益

## 与现有系统的整合

### 1. 经验系统联动
- 技能升级是获得天赋点的主要途径
- 天赋加成直接影响经验获取效率
- 形成"升级→天赋点→更快升级"的正向循环

### 2. 任务系统增强
- 天赋可以降低任务难度（减少能量球需求）
- 天赋可以增加任务奖励（经验加成）
- 某些天赋解锁特殊任务类型

### 3. 能量球系统优化
- 天赋可以增加能量球上限
- 天赋可以加快能量球恢复
- 天赋可以提高能量球使用效率

### 4. AI系统增强
- 高级天赋解锁更智能的任务推荐
- 天赋影响AI对任务难度的评估
- 个性化的成长建议基于天赋配置

## 实施优先级

### 第一阶段：基础框架
1. 天赋点数的获取和存储
2. 简单的天赋树UI
3. 基础层天赋效果实现

### 第二阶段：核心功能
1. 完整的天赋树系统
2. 天赋效果与各系统的联动
3. 天赋重置功能

### 第三阶段：高级特性
1. 成就系统关联
2. 特殊天赋和隐藏天赋
3. 天赋组合效果

## UI/UX设计要点

1. **可视化天赋树**：类似技能树的图形化展示
2. **清晰的进度显示**：显示当前点数和下一级需求
3. **效果预览**：点击天赋显示具体效果
4. **一键规划**：提供推荐的天赋加点方案

## 数据模型

```typescript
interface TalentNode {
  id: string;
  skillId: number; // 关联的核心技能
  name: string;
  description: string;
  tier: 'basic' | 'advanced' | 'master';
  requiredPoints: number; // 解锁需要的点数
  currentLevel: number; // 当前等级 0-3
  maxLevel: number; // 最大等级
  effects: TalentEffect[];
  prerequisites: string[]; // 前置天赋ID
}

interface TalentEffect {
  type: 'exp_bonus' | 'energy_bonus' | 'unlock_feature' | 'task_modifier';
  target: string; // 作用目标
  value: number; // 效果数值
  description: string;
}

interface UserTalents {
  userId: string;
  totalPoints: number; // 总天赋点
  usedPoints: number; // 已使用点数
  talentAllocations: Map<string, number>; // 天赋ID -> 投入点数
  unlockedFeatures: string[]; // 解锁的特殊功能
}
```

## 平衡性考虑

1. **防止极端build**：单一路线投入过多会有收益递减
2. **鼓励探索**：首次解锁新天赋树给予额外奖励
3. **长期目标**：大师级天赋需要长期投入才能达到
4. **公平性**：新手也能通过合理分配获得良好体验

## 总结

天赋点数系统作为进阶玩法，为用户提供了更深度的定制体验。通过与现有系统的深度整合，既增加了游戏深度，又不会让新手感到困惑。系统设计注重平衡性和长期可玩性，确保用户能够持续获得成就感和新鲜感。