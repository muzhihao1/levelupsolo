# 能量球恢复功能

> 最后更新：2025-07-03
> 版本：1.0

## 功能说明

当用户的能量球耗尽（为0）时，可以手动恢复能量球到最大值（默认18个）。

## 使用方法

1. **自动显示**：当能量球为0时，会在能量球显示区域自动出现"立即恢复能量"按钮
2. **点击恢复**：点击按钮即可恢复到满能量
3. **恢复动画**：恢复过程中会显示动画和"恢复中..."提示
4. **成功提示**：恢复成功后会显示toast提示

## 技术实现

### 后端API
- 端点：`POST /api/debug/restore-energy`
- 需要认证
- 返回恢复前后的能量值

### 前端实现
- 使用React Query mutation处理请求
- 自动刷新stats和tasks数据
- 仅在能量为0时显示按钮

## 注意事项

1. 这是一个调试功能，主要用于测试和紧急恢复
2. 正常情况下能量球会每天自动重置
3. 该功能会更新 `lastEnergyReset` 时间戳

## 相关文件
- 后端：`server/routes.ts` - `/api/debug/restore-energy` 端点
- 前端：`client/src/components/unified-rpg-task-manager.tsx` - 恢复按钮UI