import{r as g,u as Q,j as e,D as $,a as I,b as T,c as q,C as b,d as f,I as w,B as j,e as C,f as R,g as B,h as O,i as A,k as G,l as E,A as M,T as N,m as k,n as D,o as K,p as h}from"./index-DCOvJKlU.js";function F({isOpen:o,onComplete:a}){const[r,s]=g.useState({userId:"",name:"",age:"",occupation:"",mission:""}),{toast:i}=Q(),l=(t,c)=>{s(m=>({...m,[t]:c}))},u=()=>{if(!n()){i({title:"请填写所有必填项",description:"请确保所有字段都已正确填写",variant:"destructive"});return}a(r),i({title:"档案创建成功！",description:"AI将根据你的资料提供更精准的建议"})},n=()=>{var t,c,m;return r.name.trim()&&((t=r.age)==null?void 0:t.trim())&&((c=r.occupation)==null?void 0:c.trim())&&((m=r.mission)==null?void 0:m.trim())};return e.jsx($,{open:o,onOpenChange:t=>!t&&s({userId:"",name:"",age:"",occupation:"",mission:""}),children:e.jsxs(I,{className:"max-w-2xl bg-card border-border",children:[e.jsxs(T,{children:[e.jsx(q,{className:"text-foreground text-xl",children:"欢迎使用个人成长追踪系统"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"请填写你的基本信息，帮助我们为你提供个性化的成长建议"})]}),e.jsxs("div",{className:"space-y-6 mt-6",children:[e.jsx(b,{className:"bg-muted border-border",children:e.jsxs(f,{className:"space-y-6 pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-2",children:"姓名 *"}),e.jsx(w,{value:r.name,onChange:t=>l("name",t.target.value),placeholder:"请输入你的姓名",className:"bg-background border-border text-foreground"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-2",children:"年龄 *"}),e.jsx(w,{value:r.age||"",onChange:t=>l("age",t.target.value),placeholder:"例如：25",className:"bg-background border-border text-foreground"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-2",children:"职业 *"}),e.jsx(w,{value:r.occupation||"",onChange:t=>l("occupation",t.target.value),placeholder:"例如：软件工程师、学生、创业者等",className:"bg-background border-border text-foreground"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-2",children:"个人使命 *"}),e.jsx("textarea",{value:r.mission||"",onChange:t=>l("mission",t.target.value),placeholder:"描述你的人生目标或使命，例如：成为更好的自己、帮助他人成长、实现财务自由等",className:"w-full px-3 py-2 bg-background border border-border rounded-md text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]})]})}),e.jsx("div",{className:"flex justify-end mt-8",children:e.jsx(j,{onClick:u,disabled:!n(),className:"bg-green-500 hover:bg-green-600 text-white px-8",children:"完成设置"})})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(C,{variant:"secondary",className:"bg-primary/10 text-primary",children:"简化版问卷"}),e.jsx(C,{variant:"secondary",className:"bg-accent/10 text-accent",children:"AI个性化建议"}),e.jsx(C,{variant:"secondary",className:"bg-green-50 text-green-600",children:"跨设备同步"})]}),e.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"现在只需要填写4个基本信息，帮助我们为你提供个性化的成长建议"})]})]})})}function H(o){const a=o.age||"未知年龄",r=o.occupation||"探索者",s=o.mission||"追求个人成长",i=[`${a}岁的${r}，正在为了"${s}"而不断努力，在独自升级的路上勇敢前行`,`来自${r}领域的成长者，以"${s}"为目标，追求卓越的升级之路`,`${a}岁的${r}英雄，怀着"${s}"的使命，在个人成长的战场上不断突破`,`${r}背景的独行者，专注于"${s}"，正书写属于自己的升级传奇`];return i[Math.floor(Math.random()*i.length)]}function L({profile:o,onEdit:a}){return e.jsxs(b,{className:"bg-card border-border",children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"text-foreground flex items-center",children:[e.jsx("i",{className:"fas fa-mask text-accent mr-2"}),"英雄介绍"]}),e.jsxs(j,{onClick:a,variant:"outline",size:"sm",className:"text-accent border-accent hover:bg-accent/10",children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"编辑"]})]})}),e.jsxs(f,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-accent/10 border border-primary/20 rounded-xl p-8 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-accent/5 to-primary/5"}),e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-accent/10 rounded-full -translate-y-12 translate-x-12"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 bg-primary/10 rounded-full translate-y-10 -translate-x-10"}),e.jsxs("div",{className:"relative z-10 space-y-4",children:[e.jsx("div",{className:"text-4xl",children:"⚡"}),e.jsx("h3",{className:"text-2xl font-bold text-foreground",children:o.name}),e.jsx("p",{className:"text-muted-foreground text-xl leading-relaxed font-medium max-w-2xl mx-auto",children:H(o)})]})]}),e.jsx("div",{className:"mt-6 bg-muted rounded-lg p-4",children:e.jsx("p",{className:"text-center text-muted-foreground text-sm",children:"AI将根据此英雄档案为您提供个性化的任务分析和成长建议"})})]})]})}function z({isOpen:o,onClose:a,onComplete:r}){const[s,i]=g.useState(0),l=O(),u=A({mutationFn:async()=>await K("PATCH","/api/profile/onboarding-completed",{}),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/profile"]}),r()},onError:p=>{console.error("Failed to update onboarding status:",p),r()}}),n=[{title:"欢迎来到 LevelUp Solo",icon:N,description:"开启你的个人成长RPG之旅",content:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx(N,{className:"h-12 w-12 text-white"})}),e.jsx("h3",{className:"text-3xl font-bold text-foreground",children:"欢迎成为冒险者！"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed text-lg",children:"LevelUp Solo 将帮助你把个人成长变成一场激动人心的RPG冒险。 通过完成任务、升级技能、解锁成就来实现你的目标。"}),e.jsx("div",{className:"bg-primary/10 rounded-lg p-4 border border-primary/20",children:e.jsx("p",{className:"text-primary text-sm font-medium",children:"💡 提示：就像游戏中的角色一样，你将通过完成日常任务来获得经验值和升级！"})})]})},{title:"设定你的目标",icon:k,description:"创建主线任务",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500/30 to-blue-600/30 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(k,{className:"h-8 w-8 text-blue-400"})}),e.jsx("h3",{className:"text-xl font-bold text-foreground text-center",children:"第一步：设定目标"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"🎯 什么是主线任务？"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:'主线任务是你的长期目标，比如"学习新技能"、"提升健康"或"完成项目"。 系统会帮你把大目标分解成可执行的小任务。'})]}),e.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"🤖 AI智能建议"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"使用AI助手来创建目标，它会自动为你生成里程碑和建议任务。"})]})]})]})},{title:"完成日常任务",icon:D,description:"开始你的冒险",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500/30 to-green-600/30 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(D,{className:"h-8 w-8 text-green-400"})}),e.jsx("h3",{className:"text-xl font-bold text-foreground text-center",children:"第二步：完成任务"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"⚔️ 番茄钟战斗系统"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"使用番茄钟专注法来完成任务，每次专注就像在打Boss战！ 完成后获得经验值和金币奖励。"})]}),e.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"🎮 三种任务类型"}),e.jsxs("ul",{className:"text-muted-foreground text-sm space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("span",{className:"text-accent",children:"主线任务"}),"：长期目标相关"]}),e.jsxs("li",{children:["• ",e.jsx("span",{className:"text-primary",children:"支线任务"}),"：日常待办事项"]}),e.jsxs("li",{children:["• ",e.jsx("span",{className:"text-green-600",children:"习惯任务"}),"：每日重复习惯"]})]})]})]})]})},{title:"升级和成长",icon:N,description:"追踪你的进步",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500/30 to-purple-600/30 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(N,{className:"h-8 w-8 text-purple-400"})}),e.jsx("h3",{className:"text-xl font-bold text-foreground text-center",children:"第三步：升级成长"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"📊 六大核心技能"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[e.jsx("div",{children:"• 情绪稳定力"}),e.jsx("div",{children:"• 学习能力"}),e.jsx("div",{children:"• 沟通表达"}),e.jsx("div",{children:"• 身体健康"}),e.jsx("div",{children:"• 专业技能"}),e.jsx("div",{children:"• 时间管理"})]})]}),e.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"🏆 成就系统"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"解锁各种成就徽章，追踪连击天数，查看详细的成长数据分析。"})]})]})]})}],t=()=>{s<n.length-1?i(s+1):r()},c=()=>{s>0&&i(s-1)},m=n[s];return e.jsx($,{open:o,onOpenChange:a,children:e.jsxs(I,{className:"w-[95vw] max-w-2xl max-h-[90vh] bg-card border-border overflow-y-auto","aria-describedby":"onboarding-description",children:[e.jsxs(T,{children:[e.jsxs(q,{className:"text-foreground text-center",children:["新手引导 (",s+1,"/",n.length,")"]}),e.jsx(G,{children:n[s].description})]}),e.jsxs("div",{id:"onboarding-description",className:"py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex justify-between mb-2",children:n.map((p,x)=>e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${x<=s?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-slate-700 text-slate-400"}`,children:x<s?e.jsx(E,{className:"h-4 w-4"}):x+1},x))}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${(s+1)/n.length*100}%`}})})]}),e.jsx("div",{className:"px-4",children:m.content})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-700",children:[e.jsx(j,{variant:"outline",onClick:c,disabled:s===0,className:"text-slate-300 border-slate-600 hover:bg-slate-700",children:"上一步"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"ghost",onClick:()=>{u.mutate()},className:"text-slate-400 hover:text-slate-300",children:"跳过教程"}),e.jsxs("div",{className:"text-sm text-slate-400",children:[s+1," / ",n.length]})]}),e.jsxs(j,{onClick:t,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[s===n.length-1?"开始冒险":"下一步",e.jsx(M,{className:"ml-2 h-4 w-4"})]})]})]})})}function _(){const[o,a]=g.useState(!1),[r,s]=g.useState(!1),i=O(),{data:l,isLoading:u}=h({queryKey:["/api/profile"],retry:!1});h({queryKey:["/api/user-stats"],retry:!1});const n=A({mutationFn:async d=>await K("POST","/api/profile",d),onSuccess:()=>{i.invalidateQueries({queryKey:["/api/profile"]}),a(!1)},onError:d=>{console.error("Profile save failed:",d),a(!1)}}),t=d=>{n.mutate(d)},c=()=>{a(!0)};h({queryKey:["/api/skills"]});const{data:m=[]}=h({queryKey:["/api/goals"]}),{data:p=[]}=h({queryKey:["/api/tasks"]});g.useEffect(()=>{!u&&l===null?a(!0):l&&(a(!1),l.hasCompletedOnboarding||s(!0))},[u,l]);const x=p.filter(d=>{const y=new Date().toDateString();return new Date(d.createdAt).toDateString()===y}),S=x.filter(d=>d.completed),P=S.reduce((d,y)=>d+(y.expReward||0),0),v=m.filter(d=>!d.completed);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"bg-card border-b border-border",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center gap-2 bg-primary/10 border border-primary/20 rounded-full px-4 py-2 mb-6",children:e.jsx("span",{className:"text-sm font-medium text-primary contrast-high",children:"个人成长RPG游戏化平台"})}),e.jsx("h1",{className:"text-hierarchy-h1 mb-4",children:"升级你的成长之旅"}),e.jsx("p",{className:"text-hierarchy-body max-w-2xl mx-auto",children:"将日常任务转化为史诗冒险，见证自己的成长"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:()=>s(!0),className:"interactive-primary px-8 py-3 rounded-lg font-semibold text-lg hover:scale-105 transition-transform",children:"开始你的旅程"})})]})}),e.jsx("div",{className:"max-w-6xl mx-auto px-6 py-12",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 grid-responsive-tablet",children:[e.jsx(b,{className:"bg-card border-border shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(f,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"今日完成任务"}),e.jsx(E,{className:"h-6 w-6 text-green-500"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl font-bold text-foreground mb-2",children:S.length}),e.jsxs("div",{className:"text-lg text-muted-foreground",children:["共 ",x.length," 个任务"]}),P>0&&e.jsx("div",{className:"mt-4 inline-flex items-center gap-2 bg-accent/10 border border-accent/20 rounded-full px-4 py-2",children:e.jsxs("span",{className:"text-sm font-medium text-accent",children:["今日获得 +",P," XP"]})})]})]})}),e.jsx(b,{className:"bg-card border-border shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(f,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"活跃目标"}),e.jsx(k,{className:"h-6 w-6 text-primary"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl font-bold text-foreground mb-2",children:v.length}),e.jsx("div",{className:"text-lg text-muted-foreground",children:"个目标进行中"}),v.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"下一个里程碑:"}),e.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:v[0].title})]})]})]})})]})}),l&&e.jsx("div",{className:"max-w-6xl mx-auto px-6 pb-12",children:e.jsx(b,{className:"bg-card border-border shadow-sm",children:e.jsx(f,{className:"p-8",children:e.jsx(L,{profile:l,onEdit:c})})})}),e.jsx(F,{isOpen:o,onComplete:t}),e.jsx(z,{isOpen:r,onClose:()=>s(!1),onComplete:()=>{localStorage.setItem("onboarding_completed","true"),s(!1)}})]})}export{_ as default};
